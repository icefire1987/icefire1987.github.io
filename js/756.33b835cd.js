(globalThis["webpackChunksound_n_image_board"]=globalThis["webpackChunksound_n_image_board"]||[]).push([[756],{5587:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(2246);class n{constructor(e={}){this.likes=e.likes,this.urls=e.urls}getPath(){return this.urls?.small??""}getLikes(){return this.likes}}const i=n,o=JSON.parse('["cat","dog","chicken","wale","dolphin","car","train","bike","teddy","duck","drum","frog","owl","cow","pig","elephant","sheep","pony","lion","tiger","ball","flowers","apple","banana","bunny","butterfly","chair","shoes","hat","balloon","boat","balloon","sea"]'),r=JSON.parse('{"q":"cat","w":"dog","e":"chicken","r":"wale","t":"dolphin","z":"car","u":"train","i":"bike","o":"teddy","p":"duck","ü":"drum","a":"frog","s":"owl","d":"cow","f":"pig","g":"elephant","h":"sheep","j":"pony","k":"lion","l":"tiger","ö":"ball","ä":"flowers","y":"apple","x":"banana","c":"bunny","v":"butterfly","b":"chair","n":"shoes","m":"hat",",":"balloon",".":"boat","-":"balloon"," ":"sea"}');class d{constructor(){if(d.instance)return d.instance;d.instance=this,this.apiKeySound=123,this.apiKeyImage="astxCAepblSMvAuAhLX_EKInuPRA_7P_O8tdscx1uQg",this.apiUrlSound=123,this.media={},this.keymap=r,this.unsplash=(0,s.LC)({accessKey:this.apiKeyImage})}async loadMedia(e=0){if(e)for(let t=0;t<e;t++){const e=o[t];await this.fetchImages(e)}else for(let t=0;t<o.length;t++){const e=o[t];await this.fetchImages(e)}}getKeywordFromKey(e){return e?this.keymap[e]:null}getRandomKeyword(){return o[Math.floor(Math.random()*o.length)]}async fetchImages(e="",t=1){const{response:a={}}=await this.unsplash.search.getPhotos({query:e,page:t,perPage:15}),{results:s=[],total_pages:n}=a;this.media[e]=s.map((e=>{const t=new i(e);return t.getLikes()>6?t:null})).filter((e=>e)),this.getMediaCount(e)<7&&t<n&&this.fetchImages(e,t+1)}getMediaCount(e){return this.media[e]?Object.keys(this.media[e]).length:0}getItem(e){if(console.log(e,":",this.media[e]),!this.media[e])return"";const t=this.getRandomNumber(0,this.getMediaCount(e)-1),s=a(8102)(`./${e}.wav`);return{image:this.media[e][t]?new i(this.media[e][t]):null,sound:s?new Audio(s):null}}getRandomNumber(e,t){return Math.floor(Math.random()*(t-e+1)+e)}}const l=d},4756:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(9835);const n={class:"flex flex-center full-height"};function i(e,t,a,i,o,r){const d=(0,s.up)("q-spinner-grid"),l=(0,s.up)("q-img"),c=(0,s.up)("q-page-container"),h=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.j4)(h,{view:"lHh Lpr lFf"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"window-height bg-black"},{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s._)("div",null,[e.loading?((0,s.wg)(),(0,s.j4)(d,{key:0,color:"white",size:"xl"})):(0,s.kq)("",!0)])]),(0,s.Wm)(l,{class:"fullscreen",src:e.image,"spinner-color":"white",fit:"contain"},null,8,["src"])])),_:1})])),_:1})}var o=a(5587);const r=(0,s.aZ)({name:"MainLayout",components:{},data(){return{mediaService:new o.Z,pressedKeyword:null,loading:!1,image:null}},computed:{},methods:{stopSound(){this.sound&&this.sound.pause()},setSoundAndPlay(e){e&&(this.sound=e,this.sound.play())},getMedia(){if(!this.pressedKeyword)return null;this.stopSound();const{image:e,sound:t}=this.mediaService.getItem(this.pressedKeyword);return e&&(this.image=e.getPath()),this.setSoundAndPlay(t),!0},keylistener(e){const{key:t}=e;this.pressedKeyword=this.mediaService.getKeywordFromKey(t)},getRandomKeyword(){this.pressedKeyword=this.mediaService.getRandomKeyword()},async fetchData(){try{this.loading=!0,console.log("load"),await this.mediaService.loadMedia()}catch(e){console.error(e)}finally{this.loading=!1,console.log("done")}}},created(){window.addEventListener("keydown",this.keylistener),window.addEventListener("click",this.getRandomKeyword)},mounted(){this.fetchData()},watch:{pressedKeyword(){this.getMedia()}}});var d=a(1639),l=a(2500),c=a(2133),h=a(3040),u=a(335),p=a(9984),g=a.n(p);const m=(0,d.Z)(r,[["render",i]]),w=m;g()(r,"components",{QLayout:l.Z,QPageContainer:c.Z,QSpinnerGrid:h.Z,QImg:u.Z})},421:(e,t,a)=>{e.exports=a.p+"media/bike.e0c68db8.wav"},9556:(e,t,a)=>{e.exports=a.p+"media/car.fa81bffc.wav"},2978:(e,t,a)=>{e.exports=a.p+"media/cat.b4544074.wav"},1635:(e,t,a)=>{e.exports=a.p+"media/chicken.9f953334.wav"},391:(e,t,a)=>{e.exports=a.p+"media/cow.fe81b0d5.wav"},1238:(e,t,a)=>{e.exports=a.p+"media/dog.8561a64f.wav"},6027:(e,t,a)=>{e.exports=a.p+"media/drum.827ea77c.wav"},1256:(e,t,a)=>{e.exports=a.p+"media/pony.6e780ed2.wav"},9312:(e,t,a)=>{e.exports=a.p+"media/sea.dc163cc2.wav"},8102:(e,t,a)=>{var s={"./bike.wav":421,"./car.wav":9556,"./cat.wav":2978,"./chicken.wav":1635,"./cow.wav":391,"./dog.wav":1238,"./drum.wav":6027,"./pony.wav":1256,"./sea.wav":9312};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id=8102}}]);