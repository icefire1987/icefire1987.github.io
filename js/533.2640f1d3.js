"use strict";(globalThis["webpackChunksound_n_image_board"]=globalThis["webpackChunksound_n_image_board"]||[]).push([[533],{5587:(e,t,a)=>{a.d(t,{Z:()=>h});var s=a(2246);class n{constructor(e={}){this.likes=e.likes,this.urls=e.urls}getPath(){return this.urls?.small??""}getLikes(){return this.likes}}const i=n,o=JSON.parse('["cat","dog","chicken","wale","dolphin","car","train","bike","teddy","duck","drum","frog","owl","cow","pig","elephant","sheep","pony","lion","tiger","ball","flowers","apple","banana","bunny","butterfly","chair","shoes","hat","balloon","boat","balloon","sea"]'),r=JSON.parse('{"q":"cat","w":"dog","e":"chicken","r":"wale","t":"dolphin","z":"car","u":"train","i":"bike","o":"teddy","p":"duck","ü":"drum","a":"frog","s":"owl","d":"cow","f":"pig","g":"elephant","h":"sheep","j":"pony","k":"lion","l":"tiger","ö":"ball","ä":"flowers","y":"apple","x":"banana","c":"bunny","v":"butterfly","b":"chair","n":"shoes","m":"hat",",":"balloon",".":"boat","-":"balloon"," ":"sea"}');class l{constructor(){if(l.instance)return l.instance;l.instance=this,this.apiKeySound=123,this.apiKeyImage="astxCAepblSMvAuAhLX_EKInuPRA_7P_O8tdscx1uQg",this.apiUrlSound=123,this.media={},this.keymap=r,this.unsplash=(0,s.LC)({accessKey:this.apiKeyImage})}async loadMedia(){for(let e=0;e<o.length;e++){const t=o[e];await this.fetchImages(t)}}getKeywordFromKey(e){return e?this.keymap[e]:null}async fetchImages(e="",t=1){const{response:a={}}=await this.unsplash.search.getPhotos({query:e,page:t,perPage:15}),{results:s=[],total_pages:n}=a;this.media[e]=s.map((e=>{const t=new i(e);return t.getLikes()>6?t:null})).filter((e=>e)),this.getMediaCount(e)<7&&t<n&&this.fetchImages(e,t+1)}getMediaCount(e){return this.media[e]?Object.keys(this.media[e]).length:0}getItem(e){if(console.log(e,":",this.media[e]),!this.media[e])return"";const t=this.getRandomNumber(0,this.getMediaCount(e)-1);return new i(this.media[e][t])}getRandomNumber(e,t){return Math.floor(Math.random()*(t-e+1)+e)}}const h=l},2533:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(9835);const n={class:"flex flex-center full-height"};function i(e,t,a,i,o,r){const l=(0,s.up)("q-spinner-grid"),h=(0,s.up)("q-img"),c=(0,s.up)("q-page-container"),d=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.j4)(d,{view:"lHh Lpr lFf",onKeydown:e.keylistener},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"window-height bg-black"},{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s._)("div",null,[e.loading?((0,s.wg)(),(0,s.j4)(l,{key:0,color:"white",size:"xl"})):(0,s.kq)("",!0)])]),(0,s.Wm)(h,{class:"fullscreen",src:e.image,"spinner-color":"white",fit:"contain"},null,8,["src"])])),_:1})])),_:1},8,["onKeydown"])}var o=a(5587);const r=(0,s.aZ)({name:"MainLayout",components:{},data(){return{mediaService:new o.Z,pressedKeyword:null,loading:!1}},computed:{image(){if(!this.pressedKeyword)return null;const e=this.mediaService.getItem(this.pressedKeyword);return console.log(e,this.pressedKeyword),e?e.getPath():null}},methods:{keylistener(e){const{key:t}=e;this.pressedKeyword=this.mediaService.getKeywordFromKey(t)},async fetchData(){try{this.loading=!0,console.log("load"),await this.mediaService.loadMedia()}catch(e){console.error(e)}finally{this.loading=!1,console.log("done")}}},mounted(){this.fetchData()}});var l=a(1639),h=a(2500),c=a(2133),d=a(3040),u=a(335),g=a(9984),p=a.n(g);const m=(0,l.Z)(r,[["render",i]]),y=m;p()(r,"components",{QLayout:h.Z,QPageContainer:c.Z,QSpinnerGrid:d.Z,QImg:u.Z})}}]);